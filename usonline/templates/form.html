{% extends 'page.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.27.3/ui/trumbowyg.min.css"
          integrity="sha512-Fm8kRNVGCBZn0sPmwJbVXlqfJmPC13zRsMElZenX6v721g/H7OukJd8XzDEBRQ2FSATK8xNF9UYvzsCtUpfeJg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="{% static 'dynforms/jquery-bs-datepicker.min.css' %}"/>
{% endblock %}
{% block extra_js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.27.3/trumbowyg.min.js"
            integrity="sha512-YJgZG+6o3xSc0k5wv774GS+W1gx0vuSI/kr0E0UylL/Qg/noNspPtYwHPN9q6n59CTR/uhgXfjDXLTRI+uIryg=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{% static 'dynforms/jquery-bs-datepicker.min.js' %}" async></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('select[multiple]').each(function () {
                $(this).removeClass('form-select').addClass('form-select-multiple');
                new SlimSelect({
                    select: this
                })
            });

            $('.rich-text-input').trumbowyg({
                resetCss: true,
                removeformatPasted: true,
                fullscreenable: false,
                semantic: true,
                btnsDef: {
                    h3: {
                        fn: 'formatBlock',
                        title: 'Heading'
                    },
                    h4: {
                        fn: 'formatBlock',
                        title: 'Sub-heading',
                    },
                    styles: {
                        dropdown: ['p', 'blockquote', 'h3', 'h4'],
                        ico: 'p'
                    }
                },
                btns: [
                    ['styles'],
                    ['strong', 'em'],
                    ['superscript', 'subscript'],
                    ['insertImage'],
                    'btnGrp-lists',
                    ['undo', 'redo'],
                    ['removeformat'],
                    ['viewHTML']
                ]

            });

            // Initialize date inputs
            $('.dateinput, .date-input').each(function(){
                console.log($(this).is('[data-multi-date]'));
                $(this).datePicker({
                    dateFormat: "YYYY-MM-DD",
                    multiple: $(this).is('[data-multi-date]') || false,
                });
            });
        });
    </script>
{% endblock %}
{% block page-pretitle %}Form{% endblock %}
{% block page-title %}{{ form.helper.title }}{% endblock %}
{% block page-classes %}p-4{% endblock %}
{% block page-content %}
    {% crispy form form.helper %}
{% endblock %}
