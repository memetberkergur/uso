{% load dynforms %}
{% load pub_dynfields %}
{% set_subject_areas as subj_areas %}

<div class="controls {{repeatable}}" id="{{field.name}}-controls">
   <div class="row">
		<div class="field-group-item col-12">
			<select name="{{field.name}}.areas" id="{{field.name}}-areas"
                    class="form-select-multiple"
                    {% if 'multiple' in field.options %}multiple{% endif %}
                    aria-label="{{ field.label }}"
            >
			{% for value, choice in subj_areas %}
				<option value="{{value}}" {% if value in data.areas %}selected="selected"{% endif %} >{{choice}}</option>
			{% endfor %}
			</select>
            <label for="{{field.name}}-areas" class="sub-label">Subject Areas</label>
		</div>
	</div>
	<div class="row">
	    <div class="field-group-item col-12">
		    <input id="{{field.name}}-keywords" name="{{field.name}}.keywords" class="form-control" type="text" value="{{data.keywords}}">
            <label for="{{field.name}}-keywords" class="sub-label">Keywords</label>
	    </div>			
   </div>
</div>
<script>
    $(document).ready(function(){
        new SlimSelect({
            select: '#{{ field.name }}-areas',
            placeholder: 'Select subject areas',
            showSearch: true,
            searchText: 'Search subject areas...',
            allowDeselect: true,
        });
    });
</script>