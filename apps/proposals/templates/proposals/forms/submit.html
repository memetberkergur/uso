{% extends "crisp_modals/modal.html" %}
{% load timeish %}
{% load proposal_tags %}
{% load cycle_tags %}
{% block modal_title %}Submit Proposal?{% endblock %}
{% block pre_content %}
    <form action="{% url 'submit-proposal' pk=object.pk %}" method="post">{% csrf_token %}{% endblock %}
{% block post_content %}</form>{% endblock %}
{% block modal_body %}
    <div class="callout callout-info mb-3">
        <h4>{{ object.title }}</h4>
        {{ object.authors_text }}
    </div>

    <div class="row">
        <div class="col-sm-7 mb-3">
            <div class="fs-4">Cycle <strong>{{ cycle }}</strong></div>
            <hr class="hr-xs"/>
            <small>{{ cycle|cycle_comments }}</small>
        </div>
        <div class="col-sm-5 mb-3">
            <div class="fs-4">Access Mode</div>
            <hr class="hr-xs"/>
            {% if beamteam or education or staff or industrial %}
                {% if beamteam %}
                    <div class="form-check">
                        <input id="project_type1" name="project_type" type="radio" value="beamteam" class="form-check-input">
                        <label class="form-check-label" for="project_type1">Beam Team Access</label>
                    </div>
                {% endif %}
                {% if staff %}
                    <div class="form-check">
                        <input id="project_type2" name="project_type" type="radio" value="staff" class="form-check-input">
                        <label class="form-check-label" for="project_type2">Staff Access</label>
                    </div>
                {% endif %}
                {% if education %}
                    <div class="form-check">
                        <input id="project_type3" name="project_type" type="radio" value="education" class="form-check-input">
                        <label class="form-check-label" for="project_type3">Education/Outreach</label>
                    </div>
                {% endif %}
                {% if industrial %}
                    <div class="form-check">
                        <input id="project_type4" name="project_type" type="radio" value="purchased" class="form-check-input">
                        <label class="form-check-label" for="project_type4">Purchased Access</label>
                    </div>
                {% endif %}
                <div class="form-check">
                    <input id="project_type5" name="project_type" type="radio" value="user" checked class="form-check-input">
                    <label class="form-check-label" for="project_type5">General User Access</label>
                </div>
            {% else %}
                <h4 class="p-3 bg-success-subtle text-center">General User Access</h4>
                <input name="project_type" type="hidden" value="user">
            {% endif %}
        </div>
        <div class="col-sm-12">
            <div class="row">
                {% for track, items in requests.items %}
                    <div class="col-sm-{{ requests.keys|length|pluralize:'12,6' }}">
                        <div class="alert alert-secondary mb-3">
                            <h5>{{ track }} Track</h5>
                            <hr class="hr-xs"/>
                            {% for item in items %}
                                <span class="badge bg-success">{{ item.technique.acronym }} &mdash; {{ item.config.facility.acronym }}</span>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
{% block modal_footer %}
    <input type="hidden" name="post" value="yes"/>
    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
    <button type="submit" value="Submit" class="ms-auto btn btn-primary">Submit Proposal</button>
{% endblock %}



